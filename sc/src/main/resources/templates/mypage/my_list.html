<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
      layout:decorate="~{layout}">
	<th:block layout:fragment="content">
		<div id="content">
			<div>
			    <section class="wrapper">
			        <div class="mypage_wrap">
						
						<div class="container-fluid">
						
					        <div class="row">
					            <div class="course-list-title"><h2>내 강의 목록</h2></div>
					        </div>
							
						    <div class="card mb-4" th:each="entry, loop : ${list.entrySet()}">

								<div class="card-header py-3" onclick="location.href=this.querySelector('a').href" style="cursor: pointer;">
									<a th:href="@{|/video/study/list/${entry.key.lecture.id}|}" th:text="${entry.key.lecture.title}" style="text-decoration: none; color: inherit;"></a>
								</div>
								
						        <div class="card-body" 
									th:with="progress=${entry.key.progress != null and entry.key.progress instanceof T(java.lang.Number) ? entry.key.progress : 0}">

									<div class="progress progress-sm mb-2">
										<div class="progress-bar" role="progressbar" 
											th:style="'width:' + ${#numbers.formatDecimal(progress * 100, 0, 1)} + '%'" 
											th:aria-valuenow="${#numbers.formatDecimal(progress * 100, 0, 1)}"
											aria-valuemin="0" 
											aria-valuemax="100">
										</div>
									</div>
									<div class="d-flex flex-row align-items-center justify-content-between">
										<div class="course-date" th:text="${#temporals.format(entry.key.regDate, 'yyyy-MM-dd')}"></div>
										<div class="course-videos" th:each="videoProgress : ${entry.value.entrySet()}">
											<span th:text="${videoProgress.key} + '강'"></span>
										</div>
										<span th:text="${progress == 0 ? '0%' : #numbers.formatDecimal(progress * 100, 1, 1) + '%'}"></span>
										<a th:href="@{|/user/lec/delete/${entry.key.lecture.id}|}" class="delete-btn">삭제</a>
									</div>
								</div>

						    </div>

						</div>
			        </div>
			    </section>
		    </div>
		</div>
	</th:block>
</html>